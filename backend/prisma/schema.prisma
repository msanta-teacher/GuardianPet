generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model clinica {
  id        Int    @id @default(autoincrement())
  Tienda    String @db.VarChar(255)
  Direcci_n String @map("Dirección") @db.VarChar(255)
  Telefono  String @db.VarChar(255)
  Latitud   Float
  Longitud  Float
}

model enfermedad {
  id                      Int               @id @default(autoincrement())
  Tipo                    String            @db.VarChar(255)
  Fecha_inicio            DateTime          @db.DateTime(0)
  Fecha_fin               DateTime          @db.DateTime(0)
  Descripci_n             String            @map("Descripción") @db.Text
  historial_clinico_id_fk Int               @unique(map: "historial_clinico_id_fk")
  historial_clinico       historial_clinico @relation(fields: [historial_clinico_id_fk], references: [id], onUpdate: Restrict, map: "enfermedad_ibfk_1")
}

model historial_clinico {
  id                Int          @id @default(autoincrement())
  Fecha             DateTime     @db.DateTime(0)
  Descripcion       String       @db.VarChar(255)
  Tipo              String       @db.VarChar(255)
  veterinario_id_fk Int          @unique(map: "veterinario_id_fk")
  mascota_id_fk     Int          @unique(map: "mascota_id_fk")
  enfermedad        enfermedad?
  veterinario       veterinario  @relation(fields: [veterinario_id_fk], references: [id], onUpdate: Restrict, map: "historial_clinico_ibfk_1")
  mascota           mascota      @relation(fields: [mascota_id_fk], references: [id], onUpdate: Restrict, map: "historial_clinico_ibfk_2")
  operacion         operacion?
  tratamiento       tratamiento?
  vacuna            vacuna?
}

model mascota {
  id                Int                @id @default(autoincrement())
  Nombre            String             @db.VarChar(255)
  Especie           String             @db.VarChar(255)
  Raza              String             @db.VarChar(255)
  Edad              Int
  Sexo              String             @db.VarChar(255)
  usuario_id_fk     Int                @unique(map: "usuario_id_fk")
  historial_clinico historial_clinico?
  usuario           usuario            @relation(fields: [usuario_id_fk], references: [id], onUpdate: Restrict, map: "mascota_ibfk_1")
}

model operacion {
  id                      Int               @id @default(autoincrement())
  Tipo                    String            @db.VarChar(255)
  Fecha                   DateTime          @db.DateTime(0)
  Descripci_n             String            @map("Descripción") @db.Text
  historial_clinico_id_fk Int               @unique(map: "historial_clinico_id_fk")
  historial_clinico       historial_clinico @relation(fields: [historial_clinico_id_fk], references: [id], onUpdate: Restrict, map: "operacion_ibfk_1")
}

model tratamiento {
  id                      Int               @id @default(autoincrement())
  Tipo                    Int
  Fecha                   DateTime          @db.DateTime(0)
  Fecha_fin               Int
  Descripci_n             String            @map("Descripción") @db.Text
  historial_clinico_id_fk Int               @unique(map: "historial_clinico_id_fk")
  historial_clinico       historial_clinico @relation(fields: [historial_clinico_id_fk], references: [id], onUpdate: Restrict, map: "tratamiento_ibfk_1")
}

model usuario {
  id         Int      @id @default(autoincrement())
  Nombre     String   @db.VarChar(255)
  Email      String   @db.VarChar(255)
  Telefono   String   @db.VarChar(255)
  Contrase_a String   @map("Contraseña") @db.VarChar(255)
  Rol        String   @db.VarChar(255)
  mascota    mascota?
}

model vacuna {
  id                      Int               @id @default(autoincrement())
  Nombre                  String            @db.VarChar(255)
  Fecha                   DateTime          @db.DateTime(0)
  Descripci_n             String            @map("Descripción") @db.VarChar(255)
  historial_clinico_id_fk Int               @unique(map: "historial_clinico_id_fk")
  historial_clinico       historial_clinico @relation(fields: [historial_clinico_id_fk], references: [id], onUpdate: Restrict, map: "vacuna_ibfk_1")
}

model veterinario {
  id                Int                @id @default(autoincrement())
  Nombre            DateTime           @db.Date
  Email             String             @db.VarChar(255)
  Matricula         String             @db.VarChar(255)
  historial_clinico historial_clinico?
}
